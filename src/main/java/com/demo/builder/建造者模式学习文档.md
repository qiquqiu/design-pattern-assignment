# 建造者模式 - 核心精华

## 一句话理解
**分步构建复杂对象，隐藏构建细节**

## 核心思想
将复杂对象的构建过程分解成多个简单步骤，通过不同的建造者可以构建出不同的表示。

## 核心角色

### 1. 产品（Product）
- **作用**：被构建的复杂对象
- **示例**：Car类（包含车轮、油箱、车身）

### 2. 抽象建造者（Builder）
- **作用**：定义构建步骤接口
- **示例**：CarBuilder接口
```java
interface CarBuilder {
    void buildWheel();   // 建造车轮
    void buildOilBox();  // 建造油箱
    void buildBody();    // 建造车身
    Car getCar();        // 获取产品
}
```

### 3. 具体建造者（ConcreteBuilder）
- **作用**：实现具体构建逻辑
- **示例**：BmwBuilder、BenzBuilder

### 4. 指导者（Director）

> 引入 Director 后，客户端并不直接操作 Builder 来获得对象，而是通过操作 Director 来获得指定对象
> 底层构建的顺序被封装在了 Director 的方法中，并且底层的构建细节更被封装在了 Builder 的各个方法中

- **作用**：控制构建流程顺序
- **示例**：CarDirector
```java
public Car construct(CarBuilder builder) {
    builder.buildWheel();   // 固定顺序
    builder.buildOilBox();
    builder.buildBody();
    return builder.getCar();
}
```

## 构建流程
```
Director → ConcreteBuilder → Product
    ↓              ↓              ↓
  控制流程      具体建造      最终产品
```

## 核心算法
```java
// Director中的构建算法
public Car construct(CarBuilder builder) {
    builder.buildWheel();   // 步骤1
    builder.buildOilBox();  // 步骤2
    builder.buildBody();    // 步骤3
    return builder.getCar(); // 获取结果
}
```

## 与工厂模式区别

| 特点       | 建造者模式       | 工厂模式         |
|------------|------------------|------------------|
| 构建过程   | 分步构建         | 一步创建         |
| 关注点     | 构建过程         | 创建结果         |
| 灵活性     | 可控制构建步骤   | 参数化创建       |
| 复杂度     | 适合复杂对象     | 适合简单对象     |

## 优势
- **分离构建与表现**：构建代码与产品代码分离
- **控制构建流程**：Director控制固定顺序
- **灵活扩展**：新增建造者无需修改现有代码
- **隐藏细节**：客户端无需了解构建细节

## 缺点
- **代码复杂**：增加额外类和接口
- **产品变化**：产品结构变化需要修改多个类

## 实际应用
- StringBuilder：字符串构建
- DocumentBuilder：XML/JSON构建
- SQL构建器：动态SQL构建
- 配置文件构建器

## 记忆口诀
"分步建，指导控，隐藏细节变不同"

## 适用场景
- 对象构建过程复杂且步骤固定
- 不同构建方式产生不同表示
- 需要隔离构建代码和业务代码